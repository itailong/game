<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.starland.xyqp.lobby.dao.FightExploitsDao">

	<resultMap type="com.starland.xyqp.lobby.domain.FightExploits" id="SimpleMap">
		<id column="id" property="id" />
		<result column="room_id" property="roomId" />
		<result column="create_time" property="createTime" />
		<result column="game_name" property="gameName" />
		<result column="game_type" property="gameType" />
	</resultMap>
	
	<select id="findByUserId" resultMap="SimpleMap">
		SELECT
			fe.id,
			fe.room_id,
			fe.create_time,
			fe.game_name,
			fd.exploits_id
		FROM
			yx_fight_exploits AS fe
		LEFT JOIN yx_fight_detail AS fd ON fd.exploits_id = fe.id
		WHERE
			fd.user_id = #{userId}
			and fe.game_type = #{gameType}
		ORDER BY create_time DESC
		LIMIT 0, 10
	</select>
	
	<select id="findAllByUserId" resultMap="SimpleMap">
		SELECT
			fe.id,
			fe.room_id,
			fe.create_time,
			fe.game_name
		FROM
			yx_fight_exploits AS fe
		LEFT JOIN yx_fight_detail AS fd ON fd.exploits_id = fe.id
		WHERE
			fd.user_id = #{userId}
		ORDER BY create_time DESC
		LIMIT 0, 20
	</select>
	
</mapper>